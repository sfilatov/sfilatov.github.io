---
layout: post
title: "Импорт файла в формате CSV в реляционную базу данных"
date: '2010-10-22T01:23:00.000-07:00'
author: "Степан"
tags:
- csv
- Rails
- ruby
- active record
- postgresql
modified_time: '2010-10-22T01:49:00.755-07:00'
blogger_id: tag:blogger.com,1999:blog-6563657311735677139.post-9171277604091716302
blogger_orig_url: http://sfilatov.blogspot.com/2010/10/csv.html
---

Достаточно стандартная задача сохранить данные из CSV файла в базе данных.<br /><br />Пути решения:<br />1) распарсить CSV файл и потом построчно залить данные в базу<br />2) импортировать данные напрямую используя средства движка базы<br /><br />Каждый вариант имеет свои плюсы и минусы. <br />   В первом случае мы получаем возможность дополнительно обработать данные. Но приходиться парсить файл, создавать лишние объекты в памяти для каждой строчки, преобразовывать их в команды SQL insert. <br />   Во втором случае мы используем встроенные команды движка базы данных, которые исполняются намного быстрее. Но встроенные команды чаще всего достаточно бедны, и в случае некорректных для базы символов в файле, большего количества колонок становиться невозможным произвести импорт корректно.<br />  Таким образом первое решение оптимально в случае, когда вы импортируйте файл из другой системы/программы, вам нужно производить дополнительную обработку данных.<br />  Второе решение оптимально в случае когда импортируемый файл имеет стандартную ширину, подходит под схему таблицы базы данных и позволит значительно ускорить импорт.